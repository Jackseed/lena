<h1>Nouveau projet</h1>
<form [formGroup]="newProject" (ngSubmit)="onSubmit()">
  <label>
    Titre :
    <input type="text" formControlName="title" />
  </label>

  <label>
    Description :
    <input type="text" formControlName="description" />
  </label>

  <label>
    Légende :
    <input type="text" formControlName="caption" />
  </label>

  <label>
    Légende finale :
    <input type="text" formControlName="finalCaption" />
  </label>
</form>
<button mat-button type="submit" (click)="save()">Sauvegarder</button>
<button mat-button>Publier</button>

<div *ngIf="project$ | async as project">
  <button mat-button [routerLink]="['/admin', project.id, 'view']">
    Prévisualiser
  </button>
  <app-uploader></app-uploader>
  <div *ngIf="images$ | async as images">
    <div *ngFor="let image of sortByPosition(images)">
      <h3>Image {{ image.position + 1 }}</h3>
      <img src="{{ image.downloadUrl }}" />
      <button mat-icon-button (click)="deleteImg(image)">
        <mat-icon>delete</mat-icon>
      </button>

      <label>
        Titre :
        <input type="text" [(ngModel)]="image.caption" />
      </label>
      <p>
        <button mat-button (click)="saveCaption(image)">
          Sauvegarder
        </button>
      </p>
    </div>
  </div>
</div>
